function [y1] = net7(x1)
%NET7 neural network simulation function.
%
% Auto-generated by MATLAB, 15-Jan-2021 21:41:49.
% 
% [y1] = net7(x1) takes these arguments:
%   x = 3xQ matrix, input #1
% and returns:
%   y = 1xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [2.44;1.37;1.04];
x1_step1.gain = [0.185701021355617;0.217155266015201;1.13636363636364];
x1_step1.ymin = -1;

% Layer 1
b1 = [11.728794177727316139;15.182459737366754027;-9.5107664344447933047;-4.2778968770125000987;-2.7336702070794278718;-0.84879143586803218469;-5.5077641470773768262;5.0067737562657042005;7.1540565212215589952;2.3819627725197003443];
IW1_1 = [-13.28223584887504316 10.110426052748529457 26.000794404010349581;-16.449600501983606904 14.973125559661088602 19.812274123882815502;6.5293746678061657107 21.036589976659456624 3.2663515344671956164;1.0722301847725568269 8.4336777447357462734 5.3424407456489220181;0.036288661504570697558 -0.541713122992124263 3.7660838041914503904;0.07791675225640570801 2.5152678973689557296 1.3857260387396033163;-2.6519928176273217524 2.495978728880529296 2.6063118686821575842;1.6032275537239293328 0.44127503153078811993 -4.5530773539882165579;3.8752987235353191231 2.1553936947628336007 -2.4043680386915520231;-5.8418273540329748172 6.0948776074989012841 -10.855799010761895573];

% Layer 2
b2 = 0.26787242307302133737;
LW2_1 = [-0.41061323024449403185 -0.17757595738618792147 -0.10617510308602103042 -0.54880753192235287585 -0.027450252878122388678 0.45302331639073023517 0.85190701442231930862 -0.072654348982625988063 0.031461383768011511042 0.061506088048071824725];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = 0.079968012794882;
y1_step1.xoffset = 0;

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = repmat(b2,1,Q) + LW2_1*a1;

% Output 1
y1 = mapminmax_reverse(a2,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
